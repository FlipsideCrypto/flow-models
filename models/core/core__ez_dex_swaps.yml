version: 2

models:
  - name: core__ez_dex_swaps
    description: |-
      deprecating soon! The ez_dex_swaps table has been upgraded to v2 in ez_swaps. Please begin to use that table!
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - tx_id
            - trader
            - swap_contract
            - token_out_amount

    columns:
      - name: TX_ID
        description: "{{ doc('tx_id') }}"
        tests:
          - not_null

      - name: BLOCK_TIMESTAMP
        description: "{{ doc('block_timestamp') }}"
        tests:
          - not_null
          - dbt_expectations.expect_row_values_to_have_recent_data:
              datepart: day
              interval: 1
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - TIMESTAMP_NTZ

      - name: BLOCK_HEIGHT
        description: "{{ doc('block_height') }}"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - NUMBER
                - FLOAT

      - name: SWAP_CONTRACT
        description: "{{ doc('swap_contract') }}"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - STRING
                - VARCHAR

      - name: TRADER
        description: "{{ doc('trader') }}"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - STRING
                - VARCHAR

      - name: TOKEN_OUT_AMOUNT
        description: "{{ doc('token_out_amount') }}"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - NUMBER
                - FLOAT

      - name: TOKEN_OUT_CONTRACT
        description: "{{ doc('token_out_contract') }}"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - STRING
                - VARCHAR

      - name: TOKEN_IN_AMOUNT
        description: "{{ doc('token_in_amount') }}"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - NUMBER
                - FLOAT

      - name: TOKEN_IN_CONTRACT
        description: "{{ doc('token_in_contract') }}"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - STRING
                - VARCHAR
