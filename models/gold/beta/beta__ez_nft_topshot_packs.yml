version: 2

models:
  - name: beta__ez_nft_topshot_packs
    description: |-
      This ez_ view contains the NBA TopShot nfts transfers related to rips. These are assumed to be packs that were purchased and opened. This is an alpha version and does not have sale price or pack name at this time.
      
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - tx_id
            - buyer
            - nft_id

    columns:
      - name: TX_ID
        description: "{{ doc('tx_id') }}"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - STRING
                - VARCHAR

      - name: BLOCK_HEIGHT
        description: "{{ doc('block_height') }}"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - NUMBER
                - FLOAT

      - name: BLOCK_TIMESTAMP
        description: "{{ doc('block_timestamp') }}"
        tests:
          - not_null
          - dbt_expectations.expect_row_values_to_have_recent_data:
              datepart: day
              interval: 1
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - TIMESTAMP_NTZ

      - name: MARKETPLACE
        description: "{{ doc('marketplace') }}"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - STRING
                - VARCHAR


      - name: NFT_ID
        description: "{{ doc('nft_id') }}"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - STRING
                - VARCHAR
                - NUMBER

      - name: BUYER
        description: "{{ doc('buyer') }}"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - STRING
                - VARCHAR

      - name: SELLER
        description: "{{ doc('seller') }}"



      - name: TX_SUCCEEDED
        description: "{{ doc('tx_succeeded') }}"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - BOOLEAN

