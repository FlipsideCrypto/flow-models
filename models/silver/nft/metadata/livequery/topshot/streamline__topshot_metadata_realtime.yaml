version: 2

models:
  - name: streamline__topshot_metadata_realtime  
    config:
      materialized: view
      tags: ['streamline', 'topshot', 'moments_metadata']
    meta:
      streamline:
        enabled: true  
        http:
          method: POST  
          headers:
            Content-Type: application/json
            Accept: application/json
            Accept-Encoding: gzip
            Connection: keep-alive
            User-Agent: Flipside_Flow_metadata/0.1
          body_column: payload  
          url_column: base_url  
          timeout: 30 
        target:
          schema: FLOW_DEV
          table: moments_minted_metadata_api 
          unique_key:  
            - contract
            - id
          response_column: data 
        schedule: "@daily"  
        concurrency:
          async_concurrent_requests: 5 
          worker_batch_size: 20  
          producer_batch_size: 1 
        retries:
          # Configure retry behavior
          max_retries: 3
          min_retry_delay_ms: 5000 
          max_retry_delay_ms: 60000  